<!doctype html>
<html lang= "en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <script src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="js/jquery.js"> </script>
</head>
<body>
  <form class="form-horizontal">
    <div class="form-group">
      <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
      </div>
    </div>
    <div class="form-group">
      <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
      <div class="col-sm-10">
        <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <div class="checkbox">
          <label>
            <input type="checkbox"> Remember me
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-default" id="SignIn">Sign in</button>
        <button type="submit" class="btn btn-default" id="SignUp">Sign Up</button>
        <h2 id= 'WrongEmailOrPassword'></h2>
        <h3 id= 'RepeatEmailOrPassword'></h3>
              </div>
    </div>
  </form>
  <script type = "text/javascript">
Parse.initialize("pfMVcVpgR4VZ1EXZpmAQINCKW69g1F7MAtYus8mL", "NPlBKDY7pAYK681YCcZJ9gcrjLKu5yRHEpyTaQUG"); // var email= "olivia@danners.org";
  // var password= "Danner";


    var TestObject = Parse.Object.extend("TestObject");
    var testObject = new TestObject();
      testObject.save({foo: "bar"}, {
      success: function(object) {
        $(".success").show();
      },
      error: function(model, error) {
        $(".error").show();
      }
    });

// Things to fix up:
// 1) When you hit "Sign Up", check to make sure there's no account with that email yet (i.e. window.localStorage.getItem(emailPutIn) === null)
// 2) Up to you! :)

//Decide Username and Password

 $("#SignIn").click(function(event){
  event.preventDefault();

  var Email= $("#inputEmail3").val();
  var PasswordGiven= $("#inputPassword3").val();
  Parse.User.logIn(Email, PasswordGiven, {
    success: function(user){
      window.location.href = "HomeworkHelp.html";
    },
    error: function(user,error){
      $('#WrongEmailOrPassword').text("Wrong email or password");
    }
  });
 //  success: 
 //  var PasswordProper= window.localStorage.getItem(Email);
 //  if(PasswordProper != PasswordGiven) {

 //     $('#WrongEmailOrPassword').text("Wrong email or password");
 //  }
 // else{
 //  window.location.href = "HomeworkHelp.html";
 // }

  });


// var user = new Parse.User();
//    user.set("username", "test");
//   user.set("password", "test");
//   user.set("email", "test@gmail.com");
//   // user.set("username", $("#inputEmail3").val());
//   // user.set("password", $("#inputPassword3").val());
//   // user.set("email", $("#inputEmail3").val());
//   user.signUp(null, {
//   success: function(user) {
//     // Hooray! Let them use the app now.
//   },
//   error: function(user, error) {
//     // Show the error message somewhere and let the user try again.
//     alert("Error: " + error.code + " " + error.message);
//   }
// });

$("#SignUp").click(function(event){
  event.preventDefault();
  var user = new Parse.User();
  user.set("username", $("#inputEmail3").val());
  user.set("password", $("#inputPassword3").val());
  user.set("email", $("#inputEmail3").val());
  user.signUp(null, {
  success: function(user) {
    // Hooray! Let them use the app now.
  },
  error: function(user, error) {
    // Show the error message somewhere and let the user try again.
    alert("Error: " + error.code + " " + error.message);
  }
});
  
    
    // var emailPutIn = $("#inputEmail3").val();
    // var passwordPutIn = $("#inputPassword3").val();
    // if(window.localStorage.getItem(emailPutIn) != null)  {
    //   $('#RepeatEmailOrPassword').text("Your Email or your Password have allready been used by someone else:(");
    // }
    // else{
    //  window.localStorage.setItem(emailPutIn,passwordPutIn); 
    // }  

});
</script>
</body>
</html>